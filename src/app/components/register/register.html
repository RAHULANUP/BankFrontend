<section class="main-container">
    <div class="register">
        <h1>Sign Up</h1>
        
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <input 
                    type="text" 
                    placeholder="Full Name" 
                    formControlName="name"
                    [class.is-invalid]="name?.invalid && name?.touched"
                />
                @if(name?.invalid && name?.touched){
                <div class="invalid-feedback">
                    @if(name?.errors?.['required']){<small>Name is required</small>}
                    @if(name?.errors?.['minlength']){<small>Name must be at least 2 characters</small>}
                </div>
            }
            </div>

            <div class="form-group">
                <input 
                    type="text" 
                    placeholder="Address" 
                    formControlName="address"
                    [class.is-invalid]="address?.invalid && address?.touched"
                />
                @if(address?.invalid && address?.touched){
                <div class="invalid-feedback">
                    @if(address?.errors?.['required']){<small>Address is required</small>}
                    @if(address?.errors?.['minlength']){<small>Address must be at least 5 characters</small>}
                </div>
                }
            </div>

            <div class="form-group">
                <input 
                    type="text" 
                    placeholder="12-digit Aadhar Number" 
                    formControlName="aadhar"
                    [class.is-invalid]="aadhar?.invalid && aadhar?.touched"
                    maxlength="12"
                />
                @if(aadhar?.invalid && aadhar?.touched){
                <div class="invalid-feedback">
                    @if(aadhar?.errors?.['required']){<small>Aadhar number is required</small>}
                    @if(aadhar?.errors?.['pattern']){<small>Aadhar number must be exactly 12 digits</small>}
                </div>
                }
            </div>

            <div class="form-group">
                <input 
                    type="number" 
                    placeholder="Age" 
                    formControlName="age"
                    [class.is-invalid]="age?.invalid && age?.touched"
                    min="18"
                    max="100"
                />
                @if(age?.invalid && age?.touched){
                <div class="invalid-feedback">
                    @if(age?.errors?.['required']){<small>Age is required</small>}
                    @if(age?.errors?.['min']){<small>Minimum age is 18</small>}
                    @if(age?.errors?.['max']){<small>Maximum age is 100</small>}
                </div>
                }
            </div>

            @if(errorMessage){
            <div class="error-message">
                <span>{{ errorMessage }}</span>
            </div>
            }

            <button 
                type="submit" 
                [disabled]="!registerForm.valid || isLoading"
                class="register-btn"
            >
                @if(isLoading){<span class="spinner"></span>}
                {{ isLoading ? 'Creating Account...' : 'Register' }}
            </button>
        </form>

        <div class="login-link">
            <p>Already have an account? 
                <button type="button" class="link-button" (click)="goToLogin()">
                    Sign In
                </button>
            </p>
        </div>
    </div>
</section>
